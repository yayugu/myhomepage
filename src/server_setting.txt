Rails / Rack アプリをデプロイするためのサーバ構築があまりにも大変

新しいサーバにRackアプリをデプロイできる環境をつくろうとしたらすごく大変だった．というかいつもたいへんな思いしている気がする

<h2>もっともかんたんなほうほう</h2>
最も簡単な方法は
Ruby1.8 + Apache + Passenger だ．

しかし今時1.8でプログラム書きたいやつはいないだろう

<h2>ruby 1.9.xが入らない</h2>
なぜかDebian系もRedHat系もパッケージ管理システムに1.9系がない．自前でビルドすることになるんだけど必要なパッケージが大量にあったりとか，Rubyを管理するシステムをどれにするか(rvm, rbenv)で悩んだりしてハマる．
経験則ではバージョンを決め打ちして(1.9.3だけとか)それをrvmなどを使わず<b>普通にmakeする</b>のが一番誤りがない．

逆に複数のバージョンを並行して使用するなどは茨の道となりこのあとのrackサーバまわりでも苦労するのでおすすめしない．素直に複数サーバに分けよう．あとredmineとか1.8でしか動かないアレなやつはherokuとかfluxflexで動かすと楽．

<h2>rackサーバがどれを選んでいいかわからない / どれを選んでもハマる</h2>
最近流行の構成は
nginx + unicorn だがこれをやるとunicornの管理を自分でやる必要がでてくる
nginx + passenger だとnginxを一からビルドする必要があり，またビルドに必要なパッケージを入手してくるだけでつかれたりとかrc.dをどうしようかとかで全然すんなり入らない

apache + passenger が一番楽．どうせnginxが生きるほどの大量アクセスに見舞われたりはしないだろうし，そういうやつはこんな記事読んでない

<h2>nginxでハマる</h2>
最近増えてきたとはいえ文献が少ない．おすすめしない．Apacheのが楽

<h2>というか</h2>
Ruby自体文献が少ない．おすすめしない．PHPのが楽



